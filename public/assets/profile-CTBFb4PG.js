import{j as e}from"./maps-BkP_85Bm.js";import{r as o}from"./react-BUvn9Qyq.js";import{u as F}from"./query-BAwt2wOP.js";import{c as U,P as q,h as _,o as J,j as re,g as ie,k as oe,p as ne,u as le,S as O,X as ce,B as P}from"./index-DIhazG7A.js";import{C as D,b as T,c as M,d as A,a as B}from"./card-CVaT3zxn.js";import{L as N,I as de}from"./label-1jjjNnWq.js";import{u as ue}from"./index-NSkCLJ8O.js";import{B as me}from"./badge-BzWFgtZE.js";import{u as pe}from"./useProfile-DmUgQoUG.js";import{r as H,n as L,U as he,w as xe}from"./storage-BrJqrBtb.js";import{P as fe}from"./plus-BEBk_LKq.js";import"./supabase-LVwxr6rx.js";import"./charts-Ciu5p52_.js";const ve=U("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const be=U("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const ge=U("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var je="Separator",K="horizontal",ye=["horizontal","vertical"],G=o.forwardRef((s,a)=>{const{decorative:r,orientation:l=K,...i}=s,u=Ne(l)?l:K,c=r?{role:"none"}:{"aria-orientation":u==="vertical"?u:void 0,role:"separator"};return e.jsx(q.div,{"data-orientation":u,...c,...i,ref:a})});G.displayName=je;function Ne(s){return ye.includes(s)}var V=G;const X=o.forwardRef(({className:s,orientation:a="horizontal",decorative:r=!0,...l},i)=>e.jsx(V,{ref:i,decorative:r,orientation:a,className:_("shrink-0 bg-border",a==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...l}));X.displayName=V.displayName;var E="Switch",[Se]=ie(E),[we,ke]=Se(E),Q=o.forwardRef((s,a)=>{const{__scopeSwitch:r,name:l,checked:i,defaultChecked:u,required:h,disabled:c,value:m="on",onCheckedChange:k,form:f,...b}=s,[v,g]=o.useState(null),S=J(a,y=>g(y)),j=o.useRef(!1),w=v?f||!!v.closest("form"):!0,[x,C]=re({prop:i,defaultProp:u??!1,onChange:k,caller:E});return e.jsxs(we,{scope:r,checked:x,disabled:c,children:[e.jsx(q.button,{type:"button",role:"switch","aria-checked":x,"aria-required":h,"data-state":ee(x),"data-disabled":c?"":void 0,disabled:c,value:m,...b,ref:S,onClick:oe(s.onClick,y=>{C(R=>!R),w&&(j.current=y.isPropagationStopped(),j.current||y.stopPropagation())})}),w&&e.jsx(Z,{control:v,bubbles:!j.current,name:l,value:m,checked:x,required:h,disabled:c,form:f,style:{transform:"translateX(-100%)"}})]})});Q.displayName=E;var W="SwitchThumb",Y=o.forwardRef((s,a)=>{const{__scopeSwitch:r,...l}=s,i=ke(W,r);return e.jsx(q.span,{"data-state":ee(i.checked),"data-disabled":i.disabled?"":void 0,...l,ref:a})});Y.displayName=W;var Ce="SwitchBubbleInput",Z=o.forwardRef(({__scopeSwitch:s,control:a,checked:r,bubbles:l=!0,...i},u)=>{const h=o.useRef(null),c=J(h,u),m=ue(r),k=ne(a);return o.useEffect(()=>{const f=h.current;if(!f)return;const b=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(b,"checked").set;if(m!==r&&g){const S=new Event("click",{bubbles:l});g.call(f,r),f.dispatchEvent(S)}},[m,r,l]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:c,style:{...i.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Z.displayName=Ce;function ee(s){return s?"checked":"unchecked"}var te=Q,Pe=Y;const z=o.forwardRef(({className:s,...a},r)=>e.jsx(te,{className:_("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...a,ref:r,children:e.jsx(Pe,{className:_("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));z.displayName=te.displayName;function Ee(){const{data:s,isLoading:a}=F({queryKey:["/api/auth/user"],retry:!1});return{user:s,isLoading:a,isAuthenticated:!!s}}function qe(){const{user:s}=Ee(),{profile:a,updateSubmarkets:r,isUpdating:l}=pe(),{toast:i}=le(),{data:u=[]}=F({queryKey:["/api/prospects"]}),{data:h=[]}=F({queryKey:["/api/submarkets"]}),[c,m]=o.useState([]),[k,f]=o.useState(!1),[b,v]=o.useState(!0),[g,S]=o.useState(!1),[j,w]=o.useState(!0),[x,C]=o.useState("");o.useEffect(()=>{const t=H(L(s?.id,"mapFilters"),null),n=H(L(s?.id,"userSettings"),null);t&&m(t.selectedStatuses||[]),n&&(v(n.emailNotifications??!0),S(n.darkMode??!1),w(n.autoSave??!0))},[s?.id]);const y=()=>{const t={emailNotifications:b,darkMode:g,autoSave:j};xe(L(s?.id,"userSettings"),t)},R=()=>{const t={prospects:u,submarkets:h,filters:{selectedStatuses:c},timestamp:new Date().toISOString()},n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),d=URL.createObjectURL(n),p=document.createElement("a");p.href=d,p.download=`prospect-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(d)},se=t=>{const n=t.target.files?.[0];if(!n)return;const d=new FileReader;d.onload=p=>{try{const I=JSON.parse(p.target?.result);i({title:"Import functionality",description:"Data import will be updated to work with the database in a future update.",variant:"default"})}catch{i({title:"Import error",description:"Failed to parse the import file.",variant:"destructive"})}},d.readAsText(n),t.target.value=""},$=()=>{const t=x.trim();if(!t)return;const n=a?.submarkets||[];if(n.some(I=>I.toLowerCase()===t.toLowerCase())){i({title:"Duplicate submarket",description:`"${t}" already exists in your submarkets.`,variant:"destructive"});return}const p=[...n,t];r(p),C(""),i({title:"Submarket added",description:`"${t}" has been added to your submarkets.`})},ae=[{value:"prospect",label:"Prospect",color:"bg-gray-500"},{value:"contacted",label:"Contacted",color:"bg-blue-500"},{value:"followup",label:"Follow-up",color:"bg-yellow-500"},{value:"listing",label:"Listing",color:"bg-purple-500"},{value:"client",label:"Client",color:"bg-green-500"},{value:"no_go",label:"No Go",color:"bg-red-500"}];return s?e.jsx("div",{className:"min-h-screen bg-gray-50 pt-20 pb-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 space-y-6",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-4",children:s?.email?e.jsxs(e.Fragment,{children:["Signed in with Google Â· ",s.email]}):e.jsx(e.Fragment,{children:"Not signed in."})}),e.jsxs(D,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx(M,{children:"Submarkets"}),e.jsx(A,{children:"Manage your submarket categories"})]})]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(N,{className:"text-base font-medium",children:"Current Submarkets"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2 min-h-[2rem]",children:(a?.submarkets||[]).length===0?e.jsx("p",{className:"text-sm text-gray-500 italic",children:"No submarkets added yet"}):(a?.submarkets||[]).map(t=>e.jsxs(me,{variant:"secondary",className:"flex items-center gap-1",children:[t,e.jsx("button",{onClick:()=>{const n=(a?.submarkets||[]).filter(d=>d!==t);r(n),i({title:"Submarket removed",description:`"${t}" has been removed from your submarkets.`})},className:"ml-1 hover:bg-gray-300 rounded-full p-0.5",disabled:l,children:e.jsx(ce,{className:"h-3 w-3"})})]},t))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(de,{placeholder:"Enter new submarket name...",value:x,onChange:t=>C(t.target.value),onKeyPress:t=>{t.key==="Enter"&&(t.preventDefault(),$())},disabled:l}),e.jsx(P,{onClick:$,disabled:!x.trim()||l,size:"sm",children:e.jsx(fe,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx(M,{children:"Map Control Panel"}),e.jsx(A,{children:"Configure map filters and display options"})]})]})}),e.jsx(B,{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx(N,{className:"text-base font-medium",children:"Status Filters"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Select which prospect statuses to display on the map"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:ae.map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:t.value,checked:c.includes(t.value),onChange:n=>{n.target.checked?m([...c,t.value]):m(c.filter(d=>d!==t.value))},className:"rounded"}),e.jsxs("label",{htmlFor:t.value,className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${t.color}`}),t.label]})]},t.value))})]})})]}),e.jsxs(D,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx(M,{children:"Application Settings"}),e.jsx(A,{children:"Customize your experience"})]})]})}),e.jsxs(B,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ve,{className:"h-5 w-5 text-gray-600"}),e.jsx(N,{className:"text-base font-medium",children:"Notifications"})]}),e.jsx("div",{className:"mt-3 space-y-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{htmlFor:"email-notifications",children:"Email Notifications"}),e.jsx(z,{id:"email-notifications",checked:b,onCheckedChange:v})]})})]}),e.jsx(X,{}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ge,{className:"h-5 w-5 text-gray-600"}),e.jsx(N,{className:"text-base font-medium",children:"Data & Privacy"})]}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{htmlFor:"auto-save",children:"Auto-save Data"}),e.jsx(z,{id:"auto-save",checked:j,onCheckedChange:w})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(P,{onClick:R,variant:"outline",size:"sm",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Export Data"]}),e.jsx(P,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("label",{children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Import Data",e.jsx("input",{type:"file",accept:".json",onChange:se,className:"hidden"})]})})]})]})]}),e.jsx(P,{onClick:y,className:"w-full",children:"Save Settings"})]})]})]})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("p",{className:"text-gray-600",children:"Please log in to access your profile."})})}export{qe as default};
