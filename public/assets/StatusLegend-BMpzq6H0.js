import{c as ue,m as Pr,j as Sr,g as Nr,z as kr,P as Ke,l as Ut,R as Tr,I as Cr,k as Xe,s as Ir,h as gt,M as Ar}from"./index-DIhazG7A.js";import{j as _}from"./maps-BkP_85Bm.js";import{r as C}from"./react-BUvn9Qyq.js";import{M as Br}from"./map-pin-C6sM-pao.js";const Dr=ue("LocateFixed",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Or=ue("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);const ha=ue("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);const jr=ue("Satellite",[["path",{d:"M13 7 9 3 5 7l4 4",key:"vyckw6"}],["path",{d:"m17 11 4 4-4 4-4-4",key:"rchckc"}],["path",{d:"m8 12 4 4 6-6-4-4Z",key:"1sshf7"}],["path",{d:"m16 8 3-3",key:"x428zp"}],["path",{d:"M9 21a6 6 0 0 0-6-6",key:"1iajcf"}]]);const ga=ue("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const Vr=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const $r=ue("Shapes",[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]]);const Qt=ue("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var We="Tabs",[Lr]=Nr(We,[Ut]),Kt=Ut(),[Rr,yt]=Lr(We),Wt=C.forwardRef((r,e)=>{const{__scopeTabs:t,value:s,onValueChange:n,defaultValue:i,orientation:a="horizontal",dir:o,activationMode:d="automatic",...m}=r,c=Pr(o),[g,P]=Sr({prop:s,onChange:n,defaultProp:i??"",caller:We});return _.jsx(Rr,{scope:t,baseId:kr(),value:g,onValueChange:P,orientation:a,dir:c,activationMode:d,children:_.jsx(Ke.div,{dir:c,"data-orientation":a,...m,ref:e})})});Wt.displayName=We;var Jt="TabsList",Gt=C.forwardRef((r,e)=>{const{__scopeTabs:t,loop:s=!0,...n}=r,i=yt(Jt,t),a=Kt(t);return _.jsx(Tr,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:s,children:_.jsx(Ke.div,{role:"tablist","aria-orientation":i.orientation,...n,ref:e})})});Gt.displayName=Jt;var Ht="TabsTrigger",Xt=C.forwardRef((r,e)=>{const{__scopeTabs:t,value:s,disabled:n=!1,...i}=r,a=yt(Ht,t),o=Kt(t),d=tr(a.baseId,s),m=rr(a.baseId,s),c=s===a.value;return _.jsx(Cr,{asChild:!0,...o,focusable:!n,active:c,children:_.jsx(Ke.button,{type:"button",role:"tab","aria-selected":c,"aria-controls":m,"data-state":c?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:d,...i,ref:e,onMouseDown:Xe(r.onMouseDown,g=>{!n&&g.button===0&&g.ctrlKey===!1?a.onValueChange(s):g.preventDefault()}),onKeyDown:Xe(r.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&a.onValueChange(s)}),onFocus:Xe(r.onFocus,()=>{const g=a.activationMode!=="manual";!c&&!n&&g&&a.onValueChange(s)})})})});Xt.displayName=Ht;var Yt="TabsContent",er=C.forwardRef((r,e)=>{const{__scopeTabs:t,value:s,forceMount:n,children:i,...a}=r,o=yt(Yt,t),d=tr(o.baseId,s),m=rr(o.baseId,s),c=s===o.value,g=C.useRef(c);return C.useEffect(()=>{const P=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(P)},[]),_.jsx(Ir,{present:n||c,children:({present:P})=>_.jsx(Ke.div,{"data-state":c?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":d,hidden:!P,id:m,tabIndex:0,...a,ref:e,style:{...r.style,animationDuration:g.current?"0s":void 0},children:P&&i})})});er.displayName=Yt;function tr(r,e){return`${r}-trigger-${e}`}function rr(r,e){return`${r}-content-${e}`}var Er=Wt,sr=Gt,nr=Xt,ir=er;const ya=Er,zr=C.forwardRef(({className:r,...e},t)=>_.jsx(sr,{ref:t,className:gt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...e}));zr.displayName=sr.displayName;const Fr=C.forwardRef(({className:r,...e},t)=>_.jsx(nr,{ref:t,className:gt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...e}));Fr.displayName=nr.displayName;const Zr=C.forwardRef(({className:r,...e},t)=>_.jsx(ir,{ref:t,className:gt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...e}));Zr.displayName=ir.displayName;function Fe(){return Fe=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Fe.apply(this,arguments)}var wt=function(r){var e=C.useRef(r);return e.current=r,e},Mr=function(r,e){var t;return function(){for(var s=this,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];t!==null&&(clearTimeout(t),t=null),t=setTimeout(function(){return r.apply(s,i)},e)}};var qr=function(e){var t=e===void 0?{}:e,s=t.requestOptions,n=t.debounce,i=n===void 0?200:n,a=t.cache,o=a===void 0?24*60*60:a,d=t.cacheKey,m=d===void 0?"upa":d,c=t.googleMaps,g=t.callbackName,P=t.defaultValue,M=P===void 0?"":P,Ve=t.initOnMount,he=Ve===void 0?!0:Ve,ke=C.useState(!1),Ge=ke[0],ge=ke[1],$e=C.useState(M),B=$e[0],O=$e[1],z=C.useState({loading:!1,status:"",data:[]}),de=z[0],ne=z[1],ye=C.useRef(),Te=wt(s),me=wt(c),fe=C.useCallback(function(){var V;if(!ye.current){var U=window,Q=U.google,J=me.current,Y=J?.places||(Q==null||(V=Q.maps)==null?void 0:V.places);Y&&(ye.current=new Y.AutocompleteService,ge(!0))}},[me]),ve=C.useCallback(function(){ne({loading:!1,status:"",data:[]})},[]),Le=C.useCallback(function(V){V===void 0&&(V=m);try{sessionStorage.removeItem(V)}catch{}},[m]),Re=C.useCallback(Mr(function(V){var U;if(!V){ve();return}ne(function(J){return Fe({},J,{loading:!0})});var Q={};try{Q=JSON.parse(sessionStorage.getItem(m)||"{}")}catch{}if(o&&(Q=Object.keys(Q).reduce(function(J,Y){return Q[Y].maxAge-Date.now()>=0&&(J[Y]=Q[Y]),J},{}),Q[V])){ne({loading:!1,status:"OK",data:Q[V].data});return}(U=ye.current)==null||U.getPlacePredictions(Fe({},Te.current,{input:V}),function(J,Y){if(ne({loading:!1,status:Y,data:J||[]}),o&&Y==="OK"){Q[V]={data:J,maxAge:Date.now()+o*1e3};try{sessionStorage.setItem(m,JSON.stringify(Q))}catch{}}})},i),[o,m,ve,Te]),He=C.useCallback(function(V,U){U===void 0&&(U=!0),O(V),ye.current&&U&&Re(V)},[Re]);return C.useEffect(function(){if(!he)return function(){return null};var V=window,U=V.google;return!me.current&&!(U!=null&&U.maps)&&g?window[g]=fe:fe(),function(){window[g]&&delete window[g]}},[g,me,fe,he]),{ready:Ge,value:B,suggestions:de,setValue:He,clearSuggestions:ve,clearCache:Le,init:fe}};var Ur=function(e){var t=new window.google.maps.Geocoder;return new Promise(function(s,n){t.geocode(e,function(i,a){a!=="OK"&&n(a),!e.address&&e.componentRestrictions&&s(i),s(i)})})},Qr=function(e){var t=e.geometry.location,s=t.lat,n=t.lng;return{lat:s(),lng:n()}};function Kr({onSearch:r,bounds:e,defaultCenter:t={lat:53.5461,lng:-113.4938}}){const[s,n]=C.useState(!1),[i,a]=C.useState(-1),o=C.useMemo(()=>{const O={componentRestrictions:{country:"ca"},region:"ca"};return e?s?{...O,locationRestriction:e}:{...O,locationBias:e}:{...O,locationBias:{center:t,radius:5e4}}},[e,s,t]),{ready:d,value:m,suggestions:{status:c,data:g},setValue:P,clearSuggestions:M}=qr({requestOptions:o,debounce:300}),Ve=C.useRef(null),he=C.useRef(null),ke="places-suggestions-listbox";C.useEffect(()=>{a(-1)},[c,g.length]);const Ge=B=>{P(B.target.value)},ge=B=>()=>{const{description:O,place_id:z}=B;P(O,!1),M(),Ur({address:O}).then(async de=>{const{lat:ne,lng:ye}=Qr(de[0]);let Te,me;if(z&&window.google?.maps?.places?.PlacesService)try{const fe=new window.google.maps.places.PlacesService(document.createElement("div")),ve=await new Promise(Le=>{fe.getDetails({placeId:z,fields:["name","website"]},(Re,He)=>{He===window.google.maps.places.PlacesServiceStatus.OK?Le(Re||null):Le(null)})});Te=ve?.name??void 0,me=ve?.website??void 0}catch{}r({lat:ne,lng:ye,address:O,businessName:Te,websiteUrl:me})})},$e=()=>g.map((B,O)=>{const{place_id:z,structured_formatting:{main_text:de,secondary_text:ne}}=B;return _.jsxs("li",{id:`places-option-${O}`,role:"option","aria-selected":i===O,onClick:ge(B),onMouseEnter:()=>a(O),className:`p-2 cursor-pointer ${i===O?"bg-gray-100":"hover:bg-gray-100"}`,children:[_.jsx("strong",{children:de})," ",_.jsx("small",{children:ne})]},z)});return _.jsxs("div",{className:"relative w-[min(85vw,420px)]",children:[_.jsxs("div",{className:"flex items-center gap-2 bg-white/95 shadow-sm border border-gray-200 px-2 py-1.5",children:[_.jsx("input",{ref:Ve,value:m,onChange:Ge,onKeyDown:B=>{c!=="OK"||g.length===0||(B.key==="ArrowDown"?(B.preventDefault(),a(O=>{const z=Math.min(O+1,g.length-1);return he.current?.querySelector(`#places-option-${z}`)?.scrollIntoView({block:"nearest"}),z})):B.key==="ArrowUp"?(B.preventDefault(),a(O=>{const z=Math.max(O-1,-1);return z>=0&&he.current?.querySelector(`#places-option-${z}`)?.scrollIntoView({block:"nearest"}),z})):B.key==="Enter"?i>=0&&i<g.length?(B.preventDefault(),ge(g[i])()):g.length>0&&(B.preventDefault(),ge(g[0])()):B.key==="Escape"&&(M(),a(-1)))},disabled:!d,className:"flex-1 bg-transparent text-sm placeholder:text-gray-400 text-gray-800 focus:outline-none",placeholder:"Search...","aria-label":"Search",role:"combobox","aria-autocomplete":"list","aria-expanded":c==="OK","aria-controls":ke,"aria-activedescendant":i>=0?`places-option-${i}`:void 0}),_.jsx("button",{type:"button","aria-label":"Strict bounds",title:s?"Strict bounds: on":"Strict bounds: off",className:`h-7 w-7 grid place-items-center text-xs ${s?"bg-indigo-600 text-white hover:bg-indigo-500":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>n(B=>!B),children:_.jsx(Qt,{className:"w-4 h-4"})}),_.jsx("button",{type:"button","aria-label":"Search",className:"h-7 w-7 grid place-items-center bg-indigo-600 text-white text-xs hover:bg-indigo-500 active:scale-95",onClick:()=>{g.length>0&&ge(g[0])()},children:_.jsx(Vr,{className:"w-4 h-4",strokeWidth:2.5})})]}),c==="OK"&&_.jsx("ul",{id:ke,role:"listbox",ref:he,className:"absolute z-10 w-full bg-white shadow-lg rounded-lg mt-1 max-h-60 overflow-y-auto",children:$e()})]})}function Wr({onPolygon:r,onPin:e,onPan:t,onMyLocation:s,mapType:n="roadmap",onMapTypeChange:i,onRectangle:a,onSelect:o,activeTerraMode:d=null}){return _.jsxs("div",{className:"flex items-center gap-1.5 bg-white/95 shadow-sm border border-gray-200 px-2 py-1 w-fit",children:[_.jsx("button",{"aria-label":"Toggle Map Type",title:n==="hybrid"?"Map":"Hybrid",className:"h-7 w-7 grid place-items-center text-gray-700 hover:bg-gray-100 active:scale-95 text-[15px]",onClick:()=>i?.(n==="roadmap"?"hybrid":"roadmap"),children:n==="hybrid"?_.jsx(Ar,{className:"w-4 h-4",strokeWidth:1.5}):_.jsx(jr,{className:"w-4 h-4",strokeWidth:1.5})}),_.jsx("button",{"aria-label":"Pan",title:"Pan",className:`h-7 w-7 grid place-items-center ${d==="select"?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-100"} active:scale-95 text-[15px]`,onClick:o,children:_.jsx(Or,{className:"w-4 h-4",strokeWidth:1.5})}),_.jsx("button",{"aria-label":"Drop Pin",title:"Point",className:`h-7 w-7 grid place-items-center ${d==="point"?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-100"} active:scale-95 text-[15px]`,onClick:e,children:_.jsx(Br,{className:"w-4 h-4",strokeWidth:1.5})}),_.jsx("button",{"aria-label":"Draw Polygon",title:"Polygon",className:`h-7 w-7 grid place-items-center ${d==="polygon"?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-100"} active:scale-95 text-[15px]`,onClick:r,children:_.jsx($r,{className:"w-4 h-4",strokeWidth:1.5})}),_.jsx("button",{"aria-label":"Draw Rectangle",title:"Rectangle",className:`h-7 w-7 grid place-items-center ${d==="rectangle"?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-100"} active:scale-95 text-[15px]`,onClick:a,children:_.jsx(Qt,{className:"w-4 h-4",strokeWidth:1.5})}),"      ",_.jsx("button",{"aria-label":"My Location",title:"My Location",className:"h-7 w-7 grid place-items-center text-gray-700 hover:bg-gray-100 active:scale-95 text-[15px]",onClick:s,children:_.jsx(Dr,{className:"w-4 h-4",strokeWidth:1.5})})]})}function va({className:r="",onSearch:e,bounds:t,defaultCenter:s,onPolygon:n,onPin:i,onPan:a,mapType:o="roadmap",onMapTypeChange:d,onMyLocation:m,children:c,onRectangle:g,onSelect:P,activeTerraMode:M=null}){return _.jsxs("div",{className:`absolute top-4 left-4 z-50 flex flex-col gap-3 ${r}`,children:[_.jsx(Kr,{onSearch:e,bounds:t??null,defaultCenter:s}),_.jsx(Wr,{onPolygon:n,onPin:i,onPan:a,onMyLocation:m,mapType:o,onMapTypeChange:d,onRectangle:g,onSelect:P,activeTerraMode:M}),c]})}var T;(function(r){r.assertEqual=n=>{};function e(n){}r.assertIs=e;function t(n){throw new Error}r.assertNever=t,r.arrayToEnum=n=>{const i={};for(const a of n)i[a]=a;return i},r.getValidEnumValues=n=>{const i=r.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),a={};for(const o of i)a[o]=n[o];return r.objectValues(a)},r.objectValues=n=>r.objectKeys(n).map(function(i){return n[i]}),r.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const i=[];for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.push(a);return i},r.find=(n,i)=>{for(const a of n)if(i(a))return a},r.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function s(n,i=" | "){return n.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}r.joinValues=s,r.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(T||(T={}));var Pt;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(Pt||(Pt={}));const y=T.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ie=r=>{switch(typeof r){case"undefined":return y.undefined;case"string":return y.string;case"number":return Number.isNaN(r)?y.nan:y.number;case"boolean":return y.boolean;case"function":return y.function;case"bigint":return y.bigint;case"symbol":return y.symbol;case"object":return Array.isArray(r)?y.array:r===null?y.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?y.promise:typeof Map<"u"&&r instanceof Map?y.map:typeof Set<"u"&&r instanceof Set?y.set:typeof Date<"u"&&r instanceof Date?y.date:y.object;default:return y.unknown}},f=T.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class se extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(i){return i.message},s={_errors:[]},n=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(n);else if(a.code==="invalid_return_type")n(a.returnTypeError);else if(a.code==="invalid_arguments")n(a.argumentsError);else if(a.path.length===0)s._errors.push(t(a));else{let o=s,d=0;for(;d<a.path.length;){const m=a.path[d];d===a.path.length-1?(o[m]=o[m]||{_errors:[]},o[m]._errors.push(t(a))):o[m]=o[m]||{_errors:[]},o=o[m],d++}}};return n(this),s}static assert(e){if(!(e instanceof se))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,T.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},s=[];for(const n of this.issues)if(n.path.length>0){const i=n.path[0];t[i]=t[i]||[],t[i].push(e(n))}else s.push(e(n));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}se.create=r=>new se(r);const at=(r,e)=>{let t;switch(r.code){case f.invalid_type:r.received===y.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case f.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,T.jsonStringifyReplacer)}`;break;case f.unrecognized_keys:t=`Unrecognized key(s) in object: ${T.joinValues(r.keys,", ")}`;break;case f.invalid_union:t="Invalid input";break;case f.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${T.joinValues(r.options)}`;break;case f.invalid_enum_value:t=`Invalid enum value. Expected ${T.joinValues(r.options)}, received '${r.received}'`;break;case f.invalid_arguments:t="Invalid function arguments";break;case f.invalid_return_type:t="Invalid function return type";break;case f.invalid_date:t="Invalid date";break;case f.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:T.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case f.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="bigint"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case f.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case f.custom:t="Invalid input";break;case f.invalid_intersection_types:t="Intersection results could not be merged";break;case f.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case f.not_finite:t="Number must be finite";break;default:t=e.defaultError,T.assertNever(r)}return{message:t}};let Jr=at;function Gr(){return Jr}const Hr=r=>{const{data:e,path:t,errorMaps:s,issueData:n}=r,i=[...t,...n.path||[]],a={...n,path:i};if(n.message!==void 0)return{...n,path:i,message:n.message};let o="";const d=s.filter(m=>!!m).slice().reverse();for(const m of d)o=m(a,{data:e,defaultError:o}).message;return{...n,path:i,message:o}};function h(r,e){const t=Gr(),s=Hr({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===at?void 0:at].filter(n=>!!n)});r.common.issues.push(s)}class q{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const n of t){if(n.status==="aborted")return b;n.status==="dirty"&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const n of t){const i=await n.key,a=await n.value;s.push({key:i,value:a})}return q.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const n of t){const{key:i,value:a}=n;if(i.status==="aborted"||a.status==="aborted")return b;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||n.alwaysSet)&&(s[i.value]=a.value)}return{status:e.value,value:s}}}const b=Object.freeze({status:"aborted"}),Ce=r=>({status:"dirty",value:r}),K=r=>({status:"valid",value:r}),St=r=>r.status==="aborted",Nt=r=>r.status==="dirty",xe=r=>r.status==="valid",Ze=r=>typeof Promise<"u"&&r instanceof Promise;var v;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e?.message})(v||(v={}));class ce{constructor(e,t,s,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const kt=(r,e)=>{if(xe(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new se(r.common.issues);return this._error=t,this._error}}};function S(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:s,description:n}=r;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(a,o)=>{const{message:d}=r;return a.code==="invalid_enum_value"?{message:d??o.defaultError}:typeof o.data>"u"?{message:d??s??o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:d??t??o.defaultError}},description:n}}class k{get description(){return this._def.description}_getType(e){return ie(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ie(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new q,ctx:{common:e.parent.common,data:e.data,parsedType:ie(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Ze(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){const s={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ie(e)},n=this._parseSync({data:e,path:s.path,parent:s});return kt(s,n)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ie(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:t});return xe(s)?{value:s.value}:{issues:t.common.issues}}catch(s){s?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(s=>xe(s)?{value:s.value}:{issues:t.common.issues})}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ie(e)},n=this._parse({data:e,path:s.path,parent:s}),i=await(Ze(n)?n:Promise.resolve(n));return kt(s,i)}refine(e,t){const s=n=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(n):t;return this._refinement((n,i)=>{const a=e(n),o=()=>i.addIssue({code:f.custom,...s(n)});return typeof Promise<"u"&&a instanceof Promise?a.then(d=>d?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,t){return this._refinement((s,n)=>e(s)?!0:(n.addIssue(typeof t=="function"?t(s,n):t),!1))}_refinement(e){return new Se({schema:this,typeName:x.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return oe.create(this,this._def)}nullable(){return Ne.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return H.create(this)}promise(){return Ue.create(this,this._def)}or(e){return Me.create([this,e],this._def)}and(e){return qe.create(this,e,this._def)}transform(e){return new Se({...S(this._def),schema:this,typeName:x.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new ut({...S(this._def),innerType:this,defaultValue:t,typeName:x.ZodDefault})}brand(){return new bs({typeName:x.ZodBranded,type:this,...S(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new dt({...S(this._def),innerType:this,catchValue:t,typeName:x.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return vt.create(this,e)}readonly(){return mt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Xr=/^c[^\s-]{8,}$/i,Yr=/^[0-9a-z]+$/,es=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ts=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,rs=/^[a-z0-9_-]{21}$/i,ss=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ns=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,is=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,as="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ye;const os=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,cs=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ls=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,us=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ds=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ms=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ar="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",fs=new RegExp(`^${ar}$`);function or(r){let e="[0-5]\\d";r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`);const t=r.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function ps(r){return new RegExp(`^${or(r)}$`)}function hs(r){let e=`${ar}T${or(r)}`;const t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function gs(r,e){return!!((e==="v4"||!e)&&os.test(r)||(e==="v6"||!e)&&ls.test(r))}function ys(r,e){if(!ss.test(r))return!1;try{const[t]=r.split(".");if(!t)return!1;const s=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),n=JSON.parse(atob(s));return!(typeof n!="object"||n===null||"typ"in n&&n?.typ!=="JWT"||!n.alg||e&&n.alg!==e)}catch{return!1}}function vs(r,e){return!!((e==="v4"||!e)&&cs.test(r)||(e==="v6"||!e)&&us.test(r))}class ae extends k{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==y.string){const i=this._getOrReturnCtx(e);return h(i,{code:f.invalid_type,expected:y.string,received:i.parsedType}),b}const s=new q;let n;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),h(n,{code:f.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="max")e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),h(n,{code:f.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,o=e.data.length<i.value;(a||o)&&(n=this._getOrReturnCtx(e,n),a?h(n,{code:f.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&h(n,{code:f.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if(i.kind==="email")is.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"email",code:f.invalid_string,message:i.message}),s.dirty());else if(i.kind==="emoji")Ye||(Ye=new RegExp(as,"u")),Ye.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"emoji",code:f.invalid_string,message:i.message}),s.dirty());else if(i.kind==="uuid")ts.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"uuid",code:f.invalid_string,message:i.message}),s.dirty());else if(i.kind==="nanoid")rs.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"nanoid",code:f.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid")Xr.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"cuid",code:f.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid2")Yr.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"cuid2",code:f.invalid_string,message:i.message}),s.dirty());else if(i.kind==="ulid")es.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"ulid",code:f.invalid_string,message:i.message}),s.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),h(n,{validation:"url",code:f.invalid_string,message:i.message}),s.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"regex",code:f.invalid_string,message:i.message}),s.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),h(n,{code:f.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),h(n,{code:f.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),h(n,{code:f.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):i.kind==="datetime"?hs(i).test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{code:f.invalid_string,validation:"datetime",message:i.message}),s.dirty()):i.kind==="date"?fs.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{code:f.invalid_string,validation:"date",message:i.message}),s.dirty()):i.kind==="time"?ps(i).test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{code:f.invalid_string,validation:"time",message:i.message}),s.dirty()):i.kind==="duration"?ns.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"duration",code:f.invalid_string,message:i.message}),s.dirty()):i.kind==="ip"?gs(e.data,i.version)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"ip",code:f.invalid_string,message:i.message}),s.dirty()):i.kind==="jwt"?ys(e.data,i.alg)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"jwt",code:f.invalid_string,message:i.message}),s.dirty()):i.kind==="cidr"?vs(e.data,i.version)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"cidr",code:f.invalid_string,message:i.message}),s.dirty()):i.kind==="base64"?ds.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"base64",code:f.invalid_string,message:i.message}),s.dirty()):i.kind==="base64url"?ms.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"base64url",code:f.invalid_string,message:i.message}),s.dirty()):T.assertNever(i);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(n=>e.test(n),{validation:t,code:f.invalid_string,...v.errToObj(s)})}_addCheck(e){return new ae({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...v.errToObj(e)})}url(e){return this._addCheck({kind:"url",...v.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...v.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...v.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...v.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...v.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...v.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...v.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...v.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...v.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...v.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...v.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...v.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...v.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...v.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...v.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...v.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...v.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...v.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...v.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...v.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...v.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...v.errToObj(t)})}nonempty(e){return this.min(1,v.errToObj(e))}trim(){return new ae({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ae({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ae({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ae.create=r=>new ae({checks:[],typeName:x.ZodString,coerce:r?.coerce??!1,...S(r)});function _s(r,e){const t=(r.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,n=t>s?t:s,i=Number.parseInt(r.toFixed(n).replace(".","")),a=Number.parseInt(e.toFixed(n).replace(".",""));return i%a/10**n}class we extends k{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==y.number){const i=this._getOrReturnCtx(e);return h(i,{code:f.invalid_type,expected:y.number,received:i.parsedType}),b}let s;const n=new q;for(const i of this._def.checks)i.kind==="int"?T.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{code:f.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),h(s,{code:f.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),h(s,{code:f.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?_s(e.data,i.value)!==0&&(s=this._getOrReturnCtx(e,s),h(s,{code:f.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{code:f.not_finite,message:i.message}),n.dirty()):T.assertNever(i);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,v.toString(t))}gt(e,t){return this.setLimit("min",e,!1,v.toString(t))}lte(e,t){return this.setLimit("max",e,!0,v.toString(t))}lt(e,t){return this.setLimit("max",e,!1,v.toString(t))}setLimit(e,t,s,n){return new we({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:v.toString(n)}]})}_addCheck(e){return new we({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:v.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:v.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:v.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:v.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:v.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:v.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:v.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:v.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:v.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&T.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}we.create=r=>new we({checks:[],typeName:x.ZodNumber,coerce:r?.coerce||!1,...S(r)});class Be extends k{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==y.bigint)return this._getInvalidInput(e);let s;const n=new q;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),h(s,{code:f.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),h(s,{code:f.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),h(s,{code:f.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):T.assertNever(i);return{status:n.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return h(t,{code:f.invalid_type,expected:y.bigint,received:t.parsedType}),b}gte(e,t){return this.setLimit("min",e,!0,v.toString(t))}gt(e,t){return this.setLimit("min",e,!1,v.toString(t))}lte(e,t){return this.setLimit("max",e,!0,v.toString(t))}lt(e,t){return this.setLimit("max",e,!1,v.toString(t))}setLimit(e,t,s,n){return new Be({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:v.toString(n)}]})}_addCheck(e){return new Be({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:v.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:v.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:v.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:v.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:v.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Be.create=r=>new Be({checks:[],typeName:x.ZodBigInt,coerce:r?.coerce??!1,...S(r)});class ot extends k{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==y.boolean){const s=this._getOrReturnCtx(e);return h(s,{code:f.invalid_type,expected:y.boolean,received:s.parsedType}),b}return K(e.data)}}ot.create=r=>new ot({typeName:x.ZodBoolean,coerce:r?.coerce||!1,...S(r)});class De extends k{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==y.date){const i=this._getOrReturnCtx(e);return h(i,{code:f.invalid_type,expected:y.date,received:i.parsedType}),b}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return h(i,{code:f.invalid_date}),b}const s=new q;let n;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(n=this._getOrReturnCtx(e,n),h(n,{code:f.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),s.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(n=this._getOrReturnCtx(e,n),h(n,{code:f.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),s.dirty()):T.assertNever(i);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new De({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:v.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:v.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}De.create=r=>new De({checks:[],coerce:r?.coerce||!1,typeName:x.ZodDate,...S(r)});class Tt extends k{_parse(e){if(this._getType(e)!==y.symbol){const s=this._getOrReturnCtx(e);return h(s,{code:f.invalid_type,expected:y.symbol,received:s.parsedType}),b}return K(e.data)}}Tt.create=r=>new Tt({typeName:x.ZodSymbol,...S(r)});class Ct extends k{_parse(e){if(this._getType(e)!==y.undefined){const s=this._getOrReturnCtx(e);return h(s,{code:f.invalid_type,expected:y.undefined,received:s.parsedType}),b}return K(e.data)}}Ct.create=r=>new Ct({typeName:x.ZodUndefined,...S(r)});class It extends k{_parse(e){if(this._getType(e)!==y.null){const s=this._getOrReturnCtx(e);return h(s,{code:f.invalid_type,expected:y.null,received:s.parsedType}),b}return K(e.data)}}It.create=r=>new It({typeName:x.ZodNull,...S(r)});class At extends k{constructor(){super(...arguments),this._any=!0}_parse(e){return K(e.data)}}At.create=r=>new At({typeName:x.ZodAny,...S(r)});class Bt extends k{constructor(){super(...arguments),this._unknown=!0}_parse(e){return K(e.data)}}Bt.create=r=>new Bt({typeName:x.ZodUnknown,...S(r)});class le extends k{_parse(e){const t=this._getOrReturnCtx(e);return h(t,{code:f.invalid_type,expected:y.never,received:t.parsedType}),b}}le.create=r=>new le({typeName:x.ZodNever,...S(r)});class Dt extends k{_parse(e){if(this._getType(e)!==y.undefined){const s=this._getOrReturnCtx(e);return h(s,{code:f.invalid_type,expected:y.void,received:s.parsedType}),b}return K(e.data)}}Dt.create=r=>new Dt({typeName:x.ZodVoid,...S(r)});class H extends k{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),n=this._def;if(t.parsedType!==y.array)return h(t,{code:f.invalid_type,expected:y.array,received:t.parsedType}),b;if(n.exactLength!==null){const a=t.data.length>n.exactLength.value,o=t.data.length<n.exactLength.value;(a||o)&&(h(t,{code:a?f.too_big:f.too_small,minimum:o?n.exactLength.value:void 0,maximum:a?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&t.data.length<n.minLength.value&&(h(t,{code:f.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&t.data.length>n.maxLength.value&&(h(t,{code:f.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((a,o)=>n.type._parseAsync(new ce(t,a,t.path,o)))).then(a=>q.mergeArray(s,a));const i=[...t.data].map((a,o)=>n.type._parseSync(new ce(t,a,t.path,o)));return q.mergeArray(s,i)}get element(){return this._def.type}min(e,t){return new H({...this._def,minLength:{value:e,message:v.toString(t)}})}max(e,t){return new H({...this._def,maxLength:{value:e,message:v.toString(t)}})}length(e,t){return new H({...this._def,exactLength:{value:e,message:v.toString(t)}})}nonempty(e){return this.min(1,e)}}H.create=(r,e)=>new H({type:r,minLength:null,maxLength:null,exactLength:null,typeName:x.ZodArray,...S(e)});function _e(r){if(r instanceof D){const e={};for(const t in r.shape){const s=r.shape[t];e[t]=oe.create(_e(s))}return new D({...r._def,shape:()=>e})}else return r instanceof H?new H({...r._def,type:_e(r.element)}):r instanceof oe?oe.create(_e(r.unwrap())):r instanceof Ne?Ne.create(_e(r.unwrap())):r instanceof pe?pe.create(r.items.map(e=>_e(e))):r}class D extends k{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=T.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==y.object){const m=this._getOrReturnCtx(e);return h(m,{code:f.invalid_type,expected:y.object,received:m.parsedType}),b}const{status:s,ctx:n}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof le&&this._def.unknownKeys==="strip"))for(const m in n.data)a.includes(m)||o.push(m);const d=[];for(const m of a){const c=i[m],g=n.data[m];d.push({key:{status:"valid",value:m},value:c._parse(new ce(n,g,n.path,m)),alwaysSet:m in n.data})}if(this._def.catchall instanceof le){const m=this._def.unknownKeys;if(m==="passthrough")for(const c of o)d.push({key:{status:"valid",value:c},value:{status:"valid",value:n.data[c]}});else if(m==="strict")o.length>0&&(h(n,{code:f.unrecognized_keys,keys:o}),s.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const m=this._def.catchall;for(const c of o){const g=n.data[c];d.push({key:{status:"valid",value:c},value:m._parse(new ce(n,g,n.path,c)),alwaysSet:c in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const m=[];for(const c of d){const g=await c.key,P=await c.value;m.push({key:g,value:P,alwaysSet:c.alwaysSet})}return m}).then(m=>q.mergeObjectSync(s,m)):q.mergeObjectSync(s,d)}get shape(){return this._def.shape()}strict(e){return v.errToObj,new D({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{const n=this._def.errorMap?.(t,s).message??s.defaultError;return t.code==="unrecognized_keys"?{message:v.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new D({...this._def,unknownKeys:"strip"})}passthrough(){return new D({...this._def,unknownKeys:"passthrough"})}extend(e){return new D({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new D({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:x.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new D({...this._def,catchall:e})}pick(e){const t={};for(const s of T.objectKeys(e))e[s]&&this.shape[s]&&(t[s]=this.shape[s]);return new D({...this._def,shape:()=>t})}omit(e){const t={};for(const s of T.objectKeys(this.shape))e[s]||(t[s]=this.shape[s]);return new D({...this._def,shape:()=>t})}deepPartial(){return _e(this)}partial(e){const t={};for(const s of T.objectKeys(this.shape)){const n=this.shape[s];e&&!e[s]?t[s]=n:t[s]=n.optional()}return new D({...this._def,shape:()=>t})}required(e){const t={};for(const s of T.objectKeys(this.shape))if(e&&!e[s])t[s]=this.shape[s];else{let i=this.shape[s];for(;i instanceof oe;)i=i._def.innerType;t[s]=i}return new D({...this._def,shape:()=>t})}keyof(){return cr(T.objectKeys(this.shape))}}D.create=(r,e)=>new D({shape:()=>r,unknownKeys:"strip",catchall:le.create(),typeName:x.ZodObject,...S(e)});D.strictCreate=(r,e)=>new D({shape:()=>r,unknownKeys:"strict",catchall:le.create(),typeName:x.ZodObject,...S(e)});D.lazycreate=(r,e)=>new D({shape:r,unknownKeys:"strip",catchall:le.create(),typeName:x.ZodObject,...S(e)});class Me extends k{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;function n(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const a=i.map(o=>new se(o.ctx.common.issues));return h(t,{code:f.invalid_union,unionErrors:a}),b}if(t.common.async)return Promise.all(s.map(async i=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(n);{let i;const a=[];for(const d of s){const m={...t,common:{...t.common,issues:[]},parent:null},c=d._parseSync({data:t.data,path:t.path,parent:m});if(c.status==="valid")return c;c.status==="dirty"&&!i&&(i={result:c,ctx:m}),m.common.issues.length&&a.push(m.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const o=a.map(d=>new se(d));return h(t,{code:f.invalid_union,unionErrors:o}),b}}get options(){return this._def.options}}Me.create=(r,e)=>new Me({options:r,typeName:x.ZodUnion,...S(e)});function ct(r,e){const t=ie(r),s=ie(e);if(r===e)return{valid:!0,data:r};if(t===y.object&&s===y.object){const n=T.objectKeys(e),i=T.objectKeys(r).filter(o=>n.indexOf(o)!==-1),a={...r,...e};for(const o of i){const d=ct(r[o],e[o]);if(!d.valid)return{valid:!1};a[o]=d.data}return{valid:!0,data:a}}else if(t===y.array&&s===y.array){if(r.length!==e.length)return{valid:!1};const n=[];for(let i=0;i<r.length;i++){const a=r[i],o=e[i],d=ct(a,o);if(!d.valid)return{valid:!1};n.push(d.data)}return{valid:!0,data:n}}else return t===y.date&&s===y.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class qe extends k{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),n=(i,a)=>{if(St(i)||St(a))return b;const o=ct(i.value,a.value);return o.valid?((Nt(i)||Nt(a))&&t.dirty(),{status:t.value,value:o.data}):(h(s,{code:f.invalid_intersection_types}),b)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,a])=>n(i,a)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}qe.create=(r,e,t)=>new qe({left:r,right:e,typeName:x.ZodIntersection,...S(t)});class pe extends k{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==y.array)return h(s,{code:f.invalid_type,expected:y.array,received:s.parsedType}),b;if(s.data.length<this._def.items.length)return h(s,{code:f.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),b;!this._def.rest&&s.data.length>this._def.items.length&&(h(s,{code:f.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...s.data].map((a,o)=>{const d=this._def.items[o]||this._def.rest;return d?d._parse(new ce(s,a,s.path,o)):null}).filter(a=>!!a);return s.common.async?Promise.all(i).then(a=>q.mergeArray(t,a)):q.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new pe({...this._def,rest:e})}}pe.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new pe({items:r,typeName:x.ZodTuple,rest:null,...S(e)})};class Ot extends k{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==y.map)return h(s,{code:f.invalid_type,expected:y.map,received:s.parsedType}),b;const n=this._def.keyType,i=this._def.valueType,a=[...s.data.entries()].map(([o,d],m)=>({key:n._parse(new ce(s,o,s.path,[m,"key"])),value:i._parse(new ce(s,d,s.path,[m,"value"]))}));if(s.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const d of a){const m=await d.key,c=await d.value;if(m.status==="aborted"||c.status==="aborted")return b;(m.status==="dirty"||c.status==="dirty")&&t.dirty(),o.set(m.value,c.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const d of a){const m=d.key,c=d.value;if(m.status==="aborted"||c.status==="aborted")return b;(m.status==="dirty"||c.status==="dirty")&&t.dirty(),o.set(m.value,c.value)}return{status:t.value,value:o}}}}Ot.create=(r,e,t)=>new Ot({valueType:e,keyType:r,typeName:x.ZodMap,...S(t)});class Oe extends k{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==y.set)return h(s,{code:f.invalid_type,expected:y.set,received:s.parsedType}),b;const n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(h(s,{code:f.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(h(s,{code:f.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const i=this._def.valueType;function a(d){const m=new Set;for(const c of d){if(c.status==="aborted")return b;c.status==="dirty"&&t.dirty(),m.add(c.value)}return{status:t.value,value:m}}const o=[...s.data.values()].map((d,m)=>i._parse(new ce(s,d,s.path,m)));return s.common.async?Promise.all(o).then(d=>a(d)):a(o)}min(e,t){return new Oe({...this._def,minSize:{value:e,message:v.toString(t)}})}max(e,t){return new Oe({...this._def,maxSize:{value:e,message:v.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Oe.create=(r,e)=>new Oe({valueType:r,minSize:null,maxSize:null,typeName:x.ZodSet,...S(e)});class jt extends k{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}jt.create=(r,e)=>new jt({getter:r,typeName:x.ZodLazy,...S(e)});class lt extends k{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return h(t,{received:t.data,code:f.invalid_literal,expected:this._def.value}),b}return{status:"valid",value:e.data}}get value(){return this._def.value}}lt.create=(r,e)=>new lt({value:r,typeName:x.ZodLiteral,...S(e)});function cr(r,e){return new Pe({values:r,typeName:x.ZodEnum,...S(e)})}class Pe extends k{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),s=this._def.values;return h(t,{expected:T.joinValues(s),received:t.parsedType,code:f.invalid_type}),b}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),s=this._def.values;return h(t,{received:t.data,code:f.invalid_enum_value,options:s}),b}return K(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Pe.create(e,{...this._def,...t})}exclude(e,t=this._def){return Pe.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}}Pe.create=cr;class Vt extends k{_parse(e){const t=T.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==y.string&&s.parsedType!==y.number){const n=T.objectValues(t);return h(s,{expected:T.joinValues(n),received:s.parsedType,code:f.invalid_type}),b}if(this._cache||(this._cache=new Set(T.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const n=T.objectValues(t);return h(s,{received:s.data,code:f.invalid_enum_value,options:n}),b}return K(e.data)}get enum(){return this._def.values}}Vt.create=(r,e)=>new Vt({values:r,typeName:x.ZodNativeEnum,...S(e)});class Ue extends k{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==y.promise&&t.common.async===!1)return h(t,{code:f.invalid_type,expected:y.promise,received:t.parsedType}),b;const s=t.parsedType===y.promise?t.data:Promise.resolve(t.data);return K(s.then(n=>this._def.type.parseAsync(n,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Ue.create=(r,e)=>new Ue({type:r,typeName:x.ZodPromise,...S(e)});class Se extends k{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===x.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:a=>{h(s,a),a.fatal?t.abort():t.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){const a=n.transform(s.data,i);if(s.common.async)return Promise.resolve(a).then(async o=>{if(t.value==="aborted")return b;const d=await this._def.schema._parseAsync({data:o,path:s.path,parent:s});return d.status==="aborted"?b:d.status==="dirty"||t.value==="dirty"?Ce(d.value):d});{if(t.value==="aborted")return b;const o=this._def.schema._parseSync({data:a,path:s.path,parent:s});return o.status==="aborted"?b:o.status==="dirty"||t.value==="dirty"?Ce(o.value):o}}if(n.type==="refinement"){const a=o=>{const d=n.refinement(o,i);if(s.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?b:(o.status==="dirty"&&t.dirty(),a(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?b:(o.status==="dirty"&&t.dirty(),a(o.value).then(()=>({status:t.value,value:o.value}))))}if(n.type==="transform")if(s.common.async===!1){const a=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!xe(a))return b;const o=n.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(a=>xe(a)?Promise.resolve(n.transform(a.value,i)).then(o=>({status:t.value,value:o})):b);T.assertNever(n)}}Se.create=(r,e,t)=>new Se({schema:r,typeName:x.ZodEffects,effect:e,...S(t)});Se.createWithPreprocess=(r,e,t)=>new Se({schema:e,effect:{type:"preprocess",transform:r},typeName:x.ZodEffects,...S(t)});class oe extends k{_parse(e){return this._getType(e)===y.undefined?K(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}oe.create=(r,e)=>new oe({innerType:r,typeName:x.ZodOptional,...S(e)});class Ne extends k{_parse(e){return this._getType(e)===y.null?K(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ne.create=(r,e)=>new Ne({innerType:r,typeName:x.ZodNullable,...S(e)});class ut extends k{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===y.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ut.create=(r,e)=>new ut({innerType:r,typeName:x.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...S(e)});class dt extends k{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Ze(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new se(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new se(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}dt.create=(r,e)=>new dt({innerType:r,typeName:x.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...S(e)});class $t extends k{_parse(e){if(this._getType(e)!==y.nan){const s=this._getOrReturnCtx(e);return h(s,{code:f.invalid_type,expected:y.nan,received:s.parsedType}),b}return{status:"valid",value:e.data}}}$t.create=r=>new $t({typeName:x.ZodNaN,...S(r)});class bs extends k{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class vt extends k{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?b:i.status==="dirty"?(t.dirty(),Ce(i.value)):this._def.out._parseAsync({data:i.value,path:s.path,parent:s})})();{const n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?b:n.status==="dirty"?(t.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(e,t){return new vt({in:e,out:t,typeName:x.ZodPipeline})}}class mt extends k{_parse(e){const t=this._def.innerType._parse(e),s=n=>(xe(n)&&(n.value=Object.freeze(n.value)),n);return Ze(t)?t.then(n=>s(n)):s(t)}unwrap(){return this._def.innerType}}mt.create=(r,e)=>new mt({innerType:r,typeName:x.ZodReadonly,...S(e)});var x;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(x||(x={}));const p=ae.create,F=we.create,xs=ot.create,te=De.create;le.create;const Ee=H.create,W=D.create,ws=Me.create;qe.create;const et=pe.create,Ps=lt.create,R=Pe.create;Ue.create;oe.create;Ne.create;const l=Symbol.for("drizzle:entityKind");function $(r,e){if(!r||typeof r!="object")return!1;if(r instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,l))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let t=Object.getPrototypeOf(r).constructor;if(t)for(;t;){if(l in t&&t[l]===e[l])return!0;t=Object.getPrototypeOf(t)}return!1}class _t{constructor(e,t){this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}static[l]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}class Ss{static[l]="ColumnBuilder";config;constructor(e,t,s){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:s,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}const be=Symbol.for("drizzle:Name");class Ns{static[l]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,t){this.reference=()=>{const{name:s,columns:n,foreignColumns:i}=e();return{name:s,columns:n,foreignTable:i[0].table,foreignColumns:i}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new ks(e,this)}}class ks{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static[l]="PgForeignKey";reference;onUpdate;onDelete;getName(){const{name:e,columns:t,foreignColumns:s}=this.reference(),n=t.map(o=>o.name),i=s.map(o=>o.name),a=[this.table[be],...n,s[0].table[be],...i];return e??`${a.join("_")}_fk`}}function Ts(r,...e){return r(...e)}function Cs(r){return new As(r)}function lr(r,e){return`${r[be]}_${e.join("_")}_unique`}class Is{constructor(e,t){this.name=t,this.columns=e}static[l]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new Bs(e,this.columns,this.nullsNotDistinctConfig,this.name)}}class As{static[l]="PgUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new Is(e,this.name)}}class Bs{constructor(e,t,s,n){this.table=e,this.columns=t,this.name=n??lr(this.table,this.columns.map(i=>i.name)),this.nullsNotDistinct=s}static[l]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}}function Lt(r,e,t){for(let s=e;s<r.length;s++){const n=r[s];if(n==="\\"){s++;continue}if(n==='"')return[r.slice(e,s).replace(/\\/g,""),s+1];if(!t&&(n===","||n==="}"))return[r.slice(e,s).replace(/\\/g,""),s]}return[r.slice(e).replace(/\\/g,""),r.length]}function ur(r,e=0){const t=[];let s=e,n=!1;for(;s<r.length;){const i=r[s];if(i===","){(n||s===e)&&t.push(""),n=!0,s++;continue}if(n=!1,i==="\\"){s+=2;continue}if(i==='"'){const[d,m]=Lt(r,s+1,!0);t.push(d),s=m;continue}if(i==="}")return[t,s+1];if(i==="{"){const[d,m]=ur(r,s+1);t.push(d),s=m;continue}const[a,o]=Lt(r,s,!1);t.push(a),s=o}return[t,s]}function Ds(r){const[e]=ur(r,1);return e}function dr(r){return`{${r.map(e=>Array.isArray(e)?dr(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}class N extends Ss{foreignKeyConfigs=[];static[l]="PgColumnBuilder";array(e){return new js(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:s,actions:n})=>Ts((i,a)=>{const o=new Ns(()=>{const d=i();return{columns:[e],foreignColumns:[d]}});return a.onUpdate&&o.onUpdate(a.onUpdate),a.onDelete&&o.onDelete(a.onDelete),o.build(t)},s,n))}buildExtraConfigColumn(e){return new Os(e,this.config)}}class w extends _t{constructor(e,t){t.uniqueName||(t.uniqueName=lr(e,[t.name])),super(e,t),this.table=e}static[l]="PgColumn"}class Os extends w{static[l]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}class tt{static[l]="IndexedColumn";constructor(e,t,s,n){this.name=e,this.keyAsName=t,this.type=s,this.indexConfig=n}name;keyAsName;type;indexConfig}class js extends N{static[l]="PgArrayBuilder";constructor(e,t,s){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=s}build(e){const t=this.config.baseBuilder.build(e);return new bt(e,this.config,t)}}class bt extends w{constructor(e,t,s,n){super(e,t),this.baseColumn=s,this.range=n,this.size=t.size}size;static[l]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=Ds(e)),e.map(t=>this.baseColumn.mapFromDriverValue(t))}mapToDriverValue(e,t=!1){const s=e.map(n=>n===null?null:$(this.baseColumn,bt)?this.baseColumn.mapToDriverValue(n,!0):this.baseColumn.mapToDriverValue(n));return t?s:dr(s)}}const Rt=Symbol.for("drizzle:isPgEnum");function Vs(r){return!!r&&typeof r=="function"&&Rt in r&&r[Rt]===!0}class mr{static[l]="Subquery";constructor(e,t,s,n=!1,i=[]){this._={brand:"Subquery",sql:e,selectedFields:t,alias:s,isWith:n,usedTables:i}}}const $s={startActiveSpan(r,e){return e()}},Ie=Symbol.for("drizzle:ViewBaseConfig"),rt=Symbol.for("drizzle:Schema"),Et=Symbol.for("drizzle:Columns"),zt=Symbol.for("drizzle:ExtraConfigColumns"),st=Symbol.for("drizzle:OriginalName"),nt=Symbol.for("drizzle:BaseName"),Qe=Symbol.for("drizzle:IsAlias"),Ft=Symbol.for("drizzle:ExtraConfigBuilder"),Ls=Symbol.for("drizzle:IsDrizzleTable");class L{static[l]="Table";static Symbol={Name:be,Schema:rt,OriginalName:st,Columns:Et,ExtraConfigColumns:zt,BaseName:nt,IsAlias:Qe,ExtraConfigBuilder:Ft};[be];[st];[rt];[Et];[zt];[nt];[Qe]=!1;[Ls]=!0;[Ft]=void 0;constructor(e,t,s){this[be]=this[st]=e,this[rt]=t,this[nt]=s}}function Rs(r){return r!=null&&typeof r.getSQL=="function"}function Es(r){const e={sql:"",params:[]};for(const t of r)e.sql+=t.sql,e.params.push(...t.params),t.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...t.typings));return e}class G{static[l]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new A([this])}}class A{constructor(e){this.queryChunks=e;for(const t of e)if($(t,L)){const s=t[L.Symbol.Schema];this.usedTables.push(s===void 0?t[L.Symbol.Name]:s+"."+t[L.Symbol.Name])}}static[l]="SQL";decoder=fr;shouldInlineParams=!1;usedTables=[];append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return $s.startActiveSpan("drizzle.buildSQL",t=>{const s=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":s.sql,"drizzle.query.params":JSON.stringify(s.params)}),s})}buildQueryFromSourceParams(e,t){const s=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:n,escapeName:i,escapeParam:a,prepareTyping:o,inlineParams:d,paramStartIndex:m}=s;return Es(e.map(c=>{if($(c,G))return{sql:c.value.join(""),params:[]};if($(c,ft))return{sql:i(c.value),params:[]};if(c===void 0)return{sql:"",params:[]};if(Array.isArray(c)){const g=[new G("(")];for(const[P,M]of c.entries())g.push(M),P<c.length-1&&g.push(new G(", "));return g.push(new G(")")),this.buildQueryFromSourceParams(g,s)}if($(c,A))return this.buildQueryFromSourceParams(c.queryChunks,{...s,inlineParams:d||c.shouldInlineParams});if($(c,L)){const g=c[L.Symbol.Schema],P=c[L.Symbol.Name];return{sql:g===void 0||c[Qe]?i(P):i(g)+"."+i(P),params:[]}}if($(c,_t)){const g=n.getColumnCasing(c);if(t.invokeSource==="indexes")return{sql:i(g),params:[]};const P=c.table[L.Symbol.Schema];return{sql:c.table[Qe]||P===void 0?i(c.table[L.Symbol.Name])+"."+i(g):i(P)+"."+i(c.table[L.Symbol.Name])+"."+i(g),params:[]}}if($(c,Fs)){const g=c[Ie].schema,P=c[Ie].name;return{sql:g===void 0||c[Ie].isAlias?i(P):i(g)+"."+i(P),params:[]}}if($(c,hr)){if($(c.value,pt))return{sql:a(m.value++,c),params:[c],typings:["none"]};const g=c.value===null?null:c.encoder.mapToDriverValue(c.value);if($(g,A))return this.buildQueryFromSourceParams([g],s);if(d)return{sql:this.mapInlineParam(g,s),params:[]};let P=["none"];return o&&(P=[o(c.encoder)]),{sql:a(m.value++,g),params:[g],typings:P}}return $(c,pt)?{sql:a(m.value++,c),params:[c],typings:["none"]}:$(c,A.Aliased)&&c.fieldAlias!==void 0?{sql:i(c.fieldAlias),params:[]}:$(c,mr)?c._.isWith?{sql:i(c._.alias),params:[]}:this.buildQueryFromSourceParams([new G("("),c._.sql,new G(") "),new ft(c._.alias)],s):Vs(c)?c.schema?{sql:i(c.schema)+"."+i(c.enumName),params:[]}:{sql:i(c.enumName),params:[]}:Rs(c)?c.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([c.getSQL()],s):this.buildQueryFromSourceParams([new G("("),c.getSQL(),new G(")")],s):d?{sql:this.mapInlineParam(c,s),params:[]}:{sql:a(m.value++,c),params:[c],typings:["none"]}}))}mapInlineParam(e,{escapeString:t}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return t(e);if(typeof e=="object"){const s=e.toString();return t(s==="[object Object]"?JSON.stringify(e):s)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new A.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}}class ft{constructor(e){this.value=e}static[l]="Name";brand;getSQL(){return new A([this])}}const fr={mapFromDriverValue:r=>r},pr={mapToDriverValue:r=>r};({...fr,...pr});class hr{constructor(e,t=pr){this.value=e,this.encoder=t}static[l]="Param";brand;getSQL(){return new A([this])}}function E(r,...e){const t=[];(e.length>0||r.length>0&&r[0]!=="")&&t.push(new G(r[0]));for(const[s,n]of e.entries())t.push(n,new G(r[s+1]));return new A(t)}(r=>{function e(){return new A([])}r.empty=e;function t(d){return new A(d)}r.fromList=t;function s(d){return new A([new G(d)])}r.raw=s;function n(d,m){const c=[];for(const[g,P]of d.entries())g>0&&m!==void 0&&c.push(m),c.push(P);return new A(c)}r.join=n;function i(d){return new ft(d)}r.identifier=i;function a(d){return new pt(d)}r.placeholder=a;function o(d,m){return new hr(d,m)}r.param=o})(E||(E={}));(r=>{class e{constructor(s,n){this.sql=s,this.fieldAlias=n}static[l]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}r.Aliased=e})(A||(A={}));class pt{constructor(e){this.name=e}static[l]="Placeholder";getSQL(){return new A([this])}}const zs=Symbol.for("drizzle:IsDrizzleView");class Fs{static[l]="View";[Ie];[zs]=!0;constructor({name:e,schema:t,selectedFields:s,query:n}){this[Ie]={name:e,originalName:e,schema:t,selectedFields:s,query:n,isExisting:!n,isAlias:!1}}getSQL(){return new A([this])}}_t.prototype.getSQL=function(){return new A([this])};L.prototype.getSQL=function(){return new A([this])};mr.prototype.getSQL=function(){return new A([this])};function j(r,e){return{name:typeof r=="string"&&r.length>0?r:"",config:typeof r=="object"?r:e}}typeof TextDecoder>"u"||new TextDecoder;class Je extends N{static[l]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){const{name:t,...s}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:s}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:t,...s}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:s}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class Zs extends Je{static[l]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new Ms(e,this.config)}}class Ms extends w{static[l]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class qs extends Je{static[l]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new Us(e,this.config)}}class Us extends w{static[l]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}function Qs(r,e){const{name:t,config:s}=j(r,e);return s.mode==="number"?new Zs(t):new qs(t)}class Ks extends N{static[l]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Ws(e,this.config)}}class Ws extends w{static[l]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class Js extends N{static[l]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new Gs(e,this.config)}}class Gs extends w{static[l]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}function Hs(r,e){const{name:t,config:s}=j(r,e);return s.mode==="number"?new Ks(t):new Js(t)}class Xs extends N{static[l]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Ys(e,this.config)}}class Ys extends w{static[l]="PgBoolean";getSQLType(){return"boolean"}}function en(r){return new Xs(r??"")}class tn extends N{static[l]="PgCharBuilder";constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new rn(e,this.config)}}class rn extends w{static[l]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}function sn(r,e={}){const{name:t,config:s}=j(r,e);return new tn(t,s)}class nn extends N{static[l]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new an(e,this.config)}}class an extends w{static[l]="PgCidr";getSQLType(){return"cidr"}}function on(r){return new nn(r??"")}class cn extends N{static[l]="PgCustomColumnBuilder";constructor(e,t,s){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=s}build(e){return new ln(e,this.config)}}class ln extends w{static[l]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,t){super(e,t),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}}function gr(r){return(e,t)=>{const{name:s,config:n}=j(e,t);return new cn(s,n,r)}}class je extends N{static[l]="PgDateColumnBaseBuilder";defaultNow(){return this.default(E`now()`)}}class un extends je{static[l]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new dn(e,this.config)}}class dn extends w{static[l]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}class mn extends je{static[l]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new fn(e,this.config)}}class fn extends w{static[l]="PgDateString";getSQLType(){return"date"}}function pn(r,e){const{name:t,config:s}=j(r,e);return s?.mode==="date"?new un(t):new mn(t)}class hn extends N{static[l]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new gn(e,this.config)}}class gn extends w{static[l]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}function yn(r){return new hn(r??"")}class vn extends N{static[l]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new _n(e,this.config)}}class _n extends w{static[l]="PgInet";getSQLType(){return"inet"}}function bn(r){return new vn(r??"")}class xn extends Je{static[l]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new wn(e,this.config)}}class wn extends w{static[l]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}function ee(r){return new xn(r??"")}class Pn extends N{static[l]="PgIntervalBuilder";constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new Sn(e,this.config)}}class Sn extends w{static[l]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){const e=this.fields?` ${this.fields}`:"",t=this.precision?`(${this.precision})`:"";return`interval${e}${t}`}}function Nn(r,e={}){const{name:t,config:s}=j(r,e);return new Pn(t,s)}class kn extends N{static[l]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new Tn(e,this.config)}}class Tn extends w{static[l]="PgJson";constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function Cn(r){return new kn(r??"")}class In extends N{static[l]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new An(e,this.config)}}class An extends w{static[l]="PgJsonb";constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function Ae(r){return new In(r??"")}class Bn extends N{static[l]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new Dn(e,this.config)}}class Dn extends w{static[l]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){const[t,s,n]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(s),Number.parseFloat(n)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}class On extends N{static[l]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new jn(e,this.config)}}class jn extends w{static[l]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){const[t,s,n]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(s),c:Number.parseFloat(n)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}function Vn(r,e){const{name:t,config:s}=j(r,e);return!s?.mode||s.mode==="tuple"?new Bn(t):new On(t)}class $n extends N{static[l]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new Ln(e,this.config)}}class Ln extends w{static[l]="PgMacaddr";getSQLType(){return"macaddr"}}function Rn(r){return new $n(r??"")}class En extends N{static[l]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new zn(e,this.config)}}class zn extends w{static[l]="PgMacaddr8";getSQLType(){return"macaddr8"}}function Fn(r){return new En(r??"")}class Zn extends N{static[l]="PgNumericBuilder";constructor(e,t,s){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=s}build(e){return new Mn(e,this.config)}}class Mn extends w{static[l]="PgNumeric";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return typeof e=="string"?e:String(e)}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}class qn extends N{static[l]="PgNumericNumberBuilder";constructor(e,t,s){super(e,"number","PgNumericNumber"),this.config.precision=t,this.config.scale=s}build(e){return new Un(e,this.config)}}class Un extends w{static[l]="PgNumericNumber";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}class Qn extends N{static[l]="PgNumericBigIntBuilder";constructor(e,t,s){super(e,"bigint","PgNumericBigInt"),this.config.precision=t,this.config.scale=s}build(e){return new Kn(e,this.config)}}class Kn extends w{static[l]="PgNumericBigInt";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}function Wn(r,e){const{name:t,config:s}=j(r,e),n=s?.mode;return n==="number"?new qn(t,s?.precision,s?.scale):n==="bigint"?new Qn(t,s?.precision,s?.scale):new Zn(t,s?.precision,s?.scale)}class Jn extends N{static[l]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new Gn(e,this.config)}}class Gn extends w{static[l]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[t,s]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(s)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}class Hn extends N{static[l]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new Xn(e,this.config)}}class Xn extends w{static[l]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[t,s]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(s)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}function Yn(r,e){const{name:t,config:s}=j(r,e);return!s?.mode||s.mode==="tuple"?new Jn(t):new Hn(t)}function ei(r){const e=[];for(let t=0;t<r.length;t+=2)e.push(Number.parseInt(r.slice(t,t+2),16));return new Uint8Array(e)}function Zt(r,e){const t=new ArrayBuffer(8),s=new DataView(t);for(let n=0;n<8;n++)s.setUint8(n,r[e+n]);return s.getFloat64(0,!0)}function yr(r){const e=ei(r);let t=0;const s=e[t];t+=1;const n=new DataView(e.buffer),i=n.getUint32(t,s===1);if(t+=4,i&536870912&&(n.getUint32(t,s===1),t+=4),(i&65535)===1){const a=Zt(e,t);t+=8;const o=Zt(e,t);return t+=8,[a,o]}throw new Error("Unsupported geometry type")}class ti extends N{static[l]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new ri(e,this.config)}}class ri extends w{static[l]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return yr(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}class si extends N{static[l]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new ni(e,this.config)}}class ni extends w{static[l]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const t=yr(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}function ii(r,e){const{name:t,config:s}=j(r,e);return!s?.mode||s.mode==="tuple"?new ti(t):new si(t)}class ai extends N{static[l]="PgRealBuilder";constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new oi(e,this.config)}}class oi extends w{static[l]="PgReal";constructor(e,t){super(e,t)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e}function ci(r){return new ai(r??"")}class li extends N{static[l]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new ui(e,this.config)}}class ui extends w{static[l]="PgSerial";getSQLType(){return"serial"}}function di(r){return new li(r??"")}class mi extends Je{static[l]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new fi(e,this.config)}}class fi extends w{static[l]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>typeof e=="string"?Number(e):e}function pi(r){return new mi(r??"")}class hi extends N{static[l]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new gi(e,this.config)}}class gi extends w{static[l]="PgSmallSerial";getSQLType(){return"smallserial"}}function yi(r){return new hi(r??"")}class vi extends N{static[l]="PgTextBuilder";constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new _i(e,this.config)}}class _i extends w{static[l]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function bi(r,e={}){const{name:t,config:s}=j(r,e);return new vi(t,s)}class xi extends je{constructor(e,t,s){super(e,"string","PgTime"),this.withTimezone=t,this.precision=s,this.config.withTimezone=t,this.config.precision=s}static[l]="PgTimeBuilder";build(e){return new wi(e,this.config)}}class wi extends w{static[l]="PgTime";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function Pi(r,e={}){const{name:t,config:s}=j(r,e);return new xi(t,s.withTimezone??!1,s.precision)}class Si extends je{static[l]="PgTimestampBuilder";constructor(e,t,s){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=s}build(e){return new Ni(e,this.config)}}class Ni extends w{static[l]="PgTimestamp";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()}class ki extends je{static[l]="PgTimestampStringBuilder";constructor(e,t,s){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=s}build(e){return new Ti(e,this.config)}}class Ti extends w{static[l]="PgTimestampString";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function I(r,e={}){const{name:t,config:s}=j(r,e);return s?.mode==="string"?new ki(t,s.withTimezone??!1,s.precision):new Si(t,s?.withTimezone??!1,s?.precision)}class Ci extends N{static[l]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(E`gen_random_uuid()`)}build(e){return new Ii(e,this.config)}}class Ii extends w{static[l]="PgUUID";getSQLType(){return"uuid"}}function Ai(r){return new Ci(r??"")}class Bi extends N{static[l]="PgVarcharBuilder";constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new Di(e,this.config)}}class Di extends w{static[l]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}function u(r,e={}){const{name:t,config:s}=j(r,e);return new Bi(t,s)}class Oi extends N{static[l]="PgBinaryVectorBuilder";constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new ji(e,this.config)}}class ji extends w{static[l]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function Vi(r,e){const{name:t,config:s}=j(r,e);return new Oi(t,s)}class $i extends N{static[l]="PgHalfVectorBuilder";constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new Li(e,this.config)}}class Li extends w{static[l]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(t=>Number.parseFloat(t))}}function Ri(r,e){const{name:t,config:s}=j(r,e);return new $i(t,s)}class Ei extends N{static[l]="PgSparseVectorBuilder";constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new zi(e,this.config)}}class zi extends w{static[l]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function Fi(r,e){const{name:t,config:s}=j(r,e);return new Ei(t,s)}class Zi extends N{static[l]="PgVectorBuilder";constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new Mi(e,this.config)}}class Mi extends w{static[l]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(t=>Number.parseFloat(t))}}function qi(r,e){const{name:t,config:s}=j(r,e);return new Zi(t,s)}function Ui(){return{bigint:Qs,bigserial:Hs,boolean:en,char:sn,cidr:on,customType:gr,date:pn,doublePrecision:yn,inet:bn,integer:ee,interval:Nn,json:Cn,jsonb:Ae,line:Vn,macaddr:Rn,macaddr8:Fn,numeric:Wn,point:Yn,geometry:ii,real:ci,serial:di,smallint:pi,smallserial:yi,text:bi,time:Pi,timestamp:I,uuid:Ai,varchar:u,bit:Vi,halfvec:Ri,sparsevec:Fi,vector:qi}}const ht=Symbol.for("drizzle:PgInlineForeignKeys"),Mt=Symbol.for("drizzle:EnableRLS");class ze extends L{static[l]="PgTable";static Symbol=Object.assign({},L.Symbol,{InlineForeignKeys:ht,EnableRLS:Mt});[ht]=[];[Mt]=!1;[L.Symbol.ExtraConfigBuilder]=void 0;[L.Symbol.ExtraConfigColumns]={}}function Qi(r,e,t,s,n=r){const i=new ze(r,s,n),a=typeof e=="function"?e(Ui()):e,o=Object.fromEntries(Object.entries(a).map(([c,g])=>{const P=g;P.setName(c);const M=P.build(i);return i[ht].push(...P.buildForeignKeys(M,i)),[c,M]})),d=Object.fromEntries(Object.entries(a).map(([c,g])=>{const P=g;P.setName(c);const M=P.buildExtraConfigColumn(i);return[c,M]})),m=Object.assign(i,o);return m[L.Symbol.Columns]=o,m[L.Symbol.ExtraConfigColumns]=d,t&&(m[ze.Symbol.ExtraConfigBuilder]=t),Object.assign(m,{enableRLS:()=>(m[ze.Symbol.EnableRLS]=!0,m)})}const Z=(r,e,t)=>Qi(r,e,t,void 0);function Ki(...r){return r[0].columns?new qt(r[0].columns,r[0].name):new qt(r)}class qt{static[l]="PgPrimaryKeyBuilder";columns;name;constructor(e,t){this.columns=e,this.name=t}build(e){return new Wi(e,this.columns,this.name)}}class Wi{constructor(e,t,s){this.table=e,this.columns=t,this.name=s}static[l]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[ze.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}}class Ji{constructor(e,t){this.unique=e,this.name=t}static[l]="PgIndexBuilderOn";on(...e){return new it(e.map(t=>{if($(t,A))return t;t=t;const s=new tt(t.name,!!t.keyAsName,t.columnType,t.indexConfig);return t.indexConfig=JSON.parse(JSON.stringify(t.defaultConfig)),s}),this.unique,!1,this.name)}onOnly(...e){return new it(e.map(t=>{if($(t,A))return t;t=t;const s=new tt(t.name,!!t.keyAsName,t.columnType,t.indexConfig);return t.indexConfig=t.defaultConfig,s}),this.unique,!0,this.name)}using(e,...t){return new it(t.map(s=>{if($(s,A))return s;s=s;const n=new tt(s.name,!!s.keyAsName,s.columnType,s.indexConfig);return s.indexConfig=JSON.parse(JSON.stringify(s.defaultConfig)),n}),this.unique,!0,this.name,e)}}class it{static[l]="PgIndexBuilder";config;constructor(e,t,s,n,i="btree"){this.config={name:n,columns:e,unique:t,only:s,method:i}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new Gi(this.config,e)}}class Gi{static[l]="PgIndex";config;constructor(e,t){this.config={...e,table:t}}}function re(r){return new Ji(!1,r)}const vr=R(["prospect","contacted","listing","client","no_go","development"]),Hi=R(["1_month","3_month","6_month","1_year"]),_r=W({type:R(["Point","Polygon"]),coordinates:ws([et([F(),F()]),Ee(et([F(),F()])),Ee(Ee(et([F(),F()])))])});W({id:p(),prospectId:p(),date:p(),type:R(["call","email","meeting","note"]),outcome:R(["contacted","no_answer","left_message","scheduled_meeting","not_interested","follow_up_later"]),notes:p(),nextFollowUp:p().optional()});const br=W({id:p(),name:p(),status:vr,notes:p(),geometry:_r,createdDate:p(),submarketId:p().optional(),lastContactDate:p().optional(),followUpTimeframe:Hi.optional(),contactName:p().optional(),contactEmail:p().optional(),contactPhone:p().optional(),contactCompany:p().optional(),size:p().optional(),acres:p().optional(),businessName:p().optional(),websiteUrl:p().optional()});br.omit({id:!0,createdDate:!0});const xr={prospect:{label:"Prospect",color:"#EAB308"},contacted:{label:"Contacted",color:"#3B82F6"},listing:{label:"Listing",color:"#10B981"},client:{label:"Client",color:"#8B5CF6"},no_go:{label:"No Go",color:"#EF4444"},development:{label:"Development",color:"#FB923C"}};Object.fromEntries(Object.entries(xr).map(([r,e])=>[r,e.color]));const Xi=W({id:p(),name:p(),color:p().optional(),isActive:xs().default(!0)});Xi.omit({id:!0});const Yi=br.extend({submarketId:p().optional(),lastContactDate:p().optional()});Yi.omit({id:!0,createdDate:!0});const ea=W({id:p(),prospectId:p(),kind:R(["call","email","visit","note"]),createdAt:p(),notes:p().optional()});ea.omit({id:!0,createdAt:!0});Z("sessions",{sid:u("sid").primaryKey(),sess:Ae("sess").notNull(),expire:I("expire").notNull()},r=>[re("IDX_session_expire").on(r.expire)]);const X=Z("users",{id:u("id").primaryKey(),email:u("email").unique(),firstName:u("first_name"),lastName:u("last_name"),profileImageUrl:u("profile_image_url"),createdAt:I("created_at").defaultNow(),updatedAt:I("updated_at").defaultNow()});Z("profiles",{id:u("id").primaryKey(),email:u("email"),firstName:u("first_name"),lastName:u("last_name"),profileImageUrl:u("profile_image_url"),name:u("name"),company:u("company"),marketCity:u("market_city").default("Edmonton"),submarkets:Ae("submarkets").$type().default([]),assetClasses:Ae("asset_classes").$type().default([]),goals:Ae("goals").$type().default({}),createdAt:I("created_at").defaultNow(),updatedAt:I("updated_at").defaultNow()});const xt=Z("listings",{id:u("id").primaryKey().default(E`gen_random_uuid()`),userId:u("user_id").notNull().references(()=>X.id),title:u("title").notNull(),address:u("address"),lat:u("lat"),lng:u("lng"),submarket:u("submarket"),dealType:u("deal_type"),size:u("size"),price:u("price"),createdAt:I("created_at").defaultNow(),archivedAt:I("archived_at")},r=>[re("IDX_listings_user").on(r.userId)]);Z("listing_members",{listingId:u("listing_id").notNull().references(()=>xt.id,{onDelete:"cascade"}),userId:u("user_id").notNull().references(()=>X.id),role:u("role").notNull().default("viewer"),createdAt:I("created_at").defaultNow()},r=>[Ki({columns:[r.listingId,r.userId],name:"PK_listing_members"}),re("IDX_listing_members_listing").on(r.listingId),re("IDX_listing_members_user").on(r.userId)]);Z("contact_interactions",{id:u("id").primaryKey().default(E`gen_random_uuid()`),userId:u("user_id").notNull().references(()=>X.id),prospectId:u("prospect_id").notNull().references(()=>wr.id,{onDelete:"cascade"}),listingId:u("listing_id").references(()=>xt.id),date:u("date").notNull(),type:u("type").notNull(),outcome:u("outcome").notNull(),notes:u("notes").default(""),nextFollowUp:u("next_follow_up"),createdAt:I("created_at").defaultNow()},r=>[re("IDX_interactions_user").on(r.userId),re("IDX_interactions_listing").on(r.listingId),re("IDX_interactions_prospect").on(r.prospectId)]);const ta=gr({dataType(){return"geometry"}}),wr=Z("prospects",{id:u("id").primaryKey().default(E`gen_random_uuid()`),userId:u("user_id").notNull().references(()=>X.id),name:u("name").notNull(),status:u("status").notNull(),notes:u("notes").default(""),geometry:ta("geometry").notNull(),submarketId:u("submarket_id"),lastContactDate:u("last_contact_date"),followUpTimeframe:u("follow_up_timeframe"),contactName:u("contact_name"),contactEmail:u("contact_email"),contactPhone:u("contact_phone"),contactCompany:u("contact_company"),size:u("size"),acres:u("acres"),businessName:u("business_name"),websiteUrl:u("website_url"),createdAt:I("created_at").defaultNow(),updatedAt:I("updated_at").defaultNow()});Z("listing_prospects",{id:u("id").primaryKey().default(E`gen_random_uuid()`),listingId:u("listing_id").notNull().references(()=>xt.id,{onDelete:"cascade"}),prospectId:u("prospect_id").notNull().references(()=>wr.id,{onDelete:"cascade"}),role:u("role").notNull().default("target"),createdAt:I("created_at").defaultNow()},r=>[re("IDX_listing_prospects_listing").on(r.listingId),re("IDX_listing_prospects_prospect").on(r.prospectId),Cs("UQ_listing_prospect").on(r.listingId,r.prospectId)]);Z("submarkets",{id:u("id").primaryKey().default(E`gen_random_uuid()`),userId:u("user_id").notNull().references(()=>X.id),name:u("name").notNull(),color:u("color"),isActive:u("is_active").default("true"),createdAt:I("created_at").defaultNow(),updatedAt:I("updated_at").defaultNow()});Z("touches",{id:u("id").primaryKey().default(E`gen_random_uuid()`),userId:u("user_id").notNull().references(()=>X.id),prospectId:u("prospect_id").notNull(),kind:u("kind").notNull(),notes:u("notes"),createdAt:I("created_at").defaultNow()});Z("requirements",{id:u("id").primaryKey().default(E`gen_random_uuid()`),userId:u("user_id").notNull().references(()=>X.id),title:u("title").notNull(),source:u("source"),location:u("location"),contactName:u("contact_name"),contactEmail:u("contact_email"),contactPhone:u("contact_phone"),spaceSize:u("space_size"),timeline:u("timeline"),status:u("status").default("active"),tags:u("tags").array().default(E`ARRAY[]::varchar[]`),notes:u("notes"),createdAt:I("created_at").defaultNow(),updatedAt:I("updated_at").defaultNow()});Z("market_comps",{id:u("id").primaryKey().default(E`gen_random_uuid()`),userId:u("user_id").notNull().references(()=>X.id),address:u("address").notNull(),submarket:u("submarket"),assetType:u("asset_type").notNull(),buildingSize:u("building_size"),landSize:u("land_size"),sourceLink:u("source_link"),notes:u("notes"),dealType:u("deal_type").notNull(),tenant:u("tenant"),termMonths:ee("term_months"),rate:u("rate"),rateType:u("rate_type"),commencement:u("commencement"),concessions:u("concessions"),saleDate:u("sale_date"),buyer:u("buyer"),seller:u("seller"),price:u("price"),pricePerSf:u("price_per_sf"),pricePerAcre:u("price_per_acre"),createdAt:I("created_at").defaultNow(),updatedAt:I("updated_at").defaultNow()});const ra=W({id:p(),userId:p(),name:p(),status:vr,notes:p(),geometry:_r,submarketId:p().optional(),lastContactDate:p().optional(),createdAt:te().optional(),updatedAt:te().optional()});ra.omit({id:!0,createdAt:!0,updatedAt:!0});const sa=W({id:p(),userId:p(),name:p(),color:p().optional(),isActive:p().default("true"),createdAt:te().optional(),updatedAt:te().optional()});sa.omit({id:!0,createdAt:!0,updatedAt:!0});const na=W({id:p(),userId:p(),prospectId:p(),kind:R(["call","email","visit","note"]),notes:p().optional(),createdAt:te().optional()});na.omit({id:!0,createdAt:!0});const ia=W({id:p().optional(),userId:p().optional(),title:p().min(1,"Title is required"),source:R(["CBRE","Colliers","LoopNet","Direct","Other","Cushman","Avison","JLL","Cresa","Omada","Remax"]).nullable().optional(),location:p().optional(),contactName:p().optional(),contactEmail:p().email().optional().or(Ps("")),contactPhone:p().optional(),spaceSize:R(["less_than_5k","5k_to_25k","25k_to_100k","100k_plus"]).nullable().optional(),timeline:R(["asap","1_3_months","3_6_months","6_12_months","12_plus_months"]).nullable().optional(),status:R(["active","fulfilled","expired"]).default("active"),tags:Ee(p()).default([]),notes:p().optional(),createdAt:p().optional(),updatedAt:p().optional()});ia.omit({id:!0,createdAt:!0,updatedAt:!0});const aa=R(["Building","Land","Other"]),oa=R(["lease","sale"]),ca=R(["Net","Gross","NNN"]),la=W({id:p().optional(),userId:p().optional(),address:p().min(1,"Address is required"),submarket:p().optional(),assetType:aa,buildingSize:p().optional(),landSize:p().optional(),sourceLink:p().optional(),notes:p().optional(),dealType:oa,tenant:p().optional(),termMonths:F().optional(),rate:p().optional(),rateType:ca.optional(),commencement:p().optional(),concessions:p().optional(),saleDate:p().optional(),buyer:p().optional(),seller:p().optional(),price:p().optional(),pricePerSf:p().optional(),pricePerAcre:p().optional(),createdAt:p().optional(),updatedAt:p().optional()});la.omit({id:!0,createdAt:!0,updatedAt:!0});Z("broker_skills",{id:u("id").primaryKey().default(E`gen_random_uuid()`),userId:u("user_id").notNull().references(()=>X.id).unique(),prospecting:ee("prospecting").default(0),followUp:ee("follow_up").default(0),consistency:ee("consistency").default(0),marketKnowledge:ee("market_knowledge").default(0),lastActivity:I("last_activity").defaultNow(),streakDays:ee("streak_days").default(0),createdAt:I("created_at").defaultNow(),updatedAt:I("updated_at").defaultNow()});Z("skill_activities",{id:u("id").primaryKey().default(E`gen_random_uuid()`),userId:u("user_id").notNull().references(()=>X.id),skillType:u("skill_type").notNull(),action:u("action").notNull(),xpGained:ee("xp_gained").notNull(),timestamp:I("timestamp").defaultNow(),relatedId:u("related_id"),multiplier:ee("multiplier").default(1)});W({id:p(),userId:p(),prospecting:F().default(0),followUp:F().default(0),consistency:F().default(0),marketKnowledge:F().default(0),lastActivity:te(),streakDays:F().default(0),createdAt:te().optional(),updatedAt:te().optional()});W({id:p(),userId:p(),skillType:R(["prospecting","followUp","consistency","marketKnowledge"]),action:p(),xpGained:F(),timestamp:te(),relatedId:p().optional(),multiplier:F().default(1)});function _a({selected:r,onToggle:e,defaultOpen:t=!0}){const[s,n]=C.useState(t);return _.jsxs("div",{className:"rounded-xl bg-neutral-900/90 text-white shadow-lg w-56 select-none",children:[_.jsxs("button",{type:"button",onClick:()=>n(i=>!i),className:"w-full flex items-center justify-between px-3 py-2",children:[_.jsx("span",{className:"text-sm font-semibold opacity-90",children:"Status"}),_.jsx("span",{className:`transition-transform ${s?"":"-rotate-90"}`,"aria-hidden":!0,children:""})]}),s&&_.jsx("div",{className:"px-3 pb-3 space-y-1",children:Object.entries(xr).map(([i,a])=>{const o=r?r.has(i):!0,d=`flex items-center gap-2 rounded-md bg-neutral-800 px-2 py-1 ${e?"cursor-pointer":""} ${o?"":"opacity-50"}`;return _.jsxs("div",{className:d,onClick:e?()=>e(i):void 0,children:[_.jsx("span",{className:"inline-block h-3 w-3 rounded-full",style:{backgroundColor:a.color}}),_.jsx("span",{className:"text-sm",children:a.label})]},i)})})]})}export{va as M,ha as P,xr as S,ya as T,zr as a,Fr as b,Zr as c,ga as d,_a as e};
